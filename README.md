# Quick Attendance

キングオブタイムとSlackへの出退勤を**ボタン1つ**で行えるモバイルアプリです。

## このアプリでできること

- ボタン1つでキングオブタイムの打刻とSlackへのメッセージ送信を同時に実行
- 自分のSlackアカウントとしてメッセージを送信（Botではない）
- 出勤・退勤メッセージは自由にカスタマイズ可能（改行もOK）

---

# アプリのインストール方法

## iPhone の場合（Expo Go経由）

### ステップ1: Expo Goアプリをインストール

1. iPhoneで **App Store** を開く
2. 検索欄に「**Expo Go**」と入力
3. 「**Expo Go**」アプリをインストール

### ステップ2: アプリを開く

以下のいずれかの方法でアプリを開きます。

#### 方法A: QRコードをスキャン（推奨）

1. iPhoneの**カメラアプリ**を開く
2. 下のQRコードをスキャン
3. 「Expo Goで開く」をタップ

#### 方法B: URLから開く

1. iPhoneのブラウザで以下のURLを開く：

   **https://expo.dev/preview/update?message=%E5%87%BA%E9%80%80%E5%8B%A4%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AF%E6%94%B9%E8%A1%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB&updateRuntimeVersion=1.0.0&createdAt=2026-01-29T10%3A13%3A17.219Z&slug=exp&projectId=2b2760f5-d265-4a6b-be7e-7243ca75250e&group=3b8b3b51-a9af-4d72-a403-68a557d1e3f1**

2. 「Open in Expo Go」をタップ

---

## Android の場合

### 方法A: Expo Go経由

#### ステップ1: Expo Goアプリをインストール

1. Androidで **Google Play ストア** を開く
2. 検索欄に「**Expo Go**」と入力
3. 「**Expo Go**」アプリをインストール

#### ステップ2: アプリを開く

以下のいずれかの方法でアプリを開きます。

##### QRコードをスキャン（推奨）

1. Expo Goアプリを開く
2. 「**Scan QR code**」をタップ
3. 下のQRコードをスキャン

##### URLから開く

1. Androidのブラウザ（Chrome）で以下のURLを開く：

   **https://expo.dev/accounts/sigunamu226/projects/quick-attendance/updates/3b8b3b51-a9af-4d72-a403-68a557d1e3f1**

2. 「Open in Expo Go」をタップ

---

### 方法B: APKを直接インストール（Expo Go不要）

Expo Goアプリを使わずに、アプリ単体でインストールする方法です。

#### ステップ1: APKファイルをダウンロード

1. 以下のリンクからAPKファイルをダウンロード：

   **[quick-attendance.apk をダウンロード](https://github.com/InoueHayato226/quick-attendance/raw/main/downloads/quick-attendance.apk)**

   ※リンクが開けない場合は、こちらからもダウンロードできます：
   https://expo.dev/artifacts/eas/31edd3ydctB8N4XSUjeL53.apk

2. ダウンロードが完了するまで待つ

#### ステップ2: 提供元不明アプリのインストールを許可

1. Androidの「**設定**」を開く
2. 「**セキュリティ**」または「**プライバシー**」を開く
3. 「**提供元不明のアプリ**」または「**不明なアプリのインストール**」を選択
4. ブラウザ（Chromeなど）を選択して「**許可**」をONにする

※ 機種によって設定の場所が異なります。見つからない場合は「設定」で「不明なアプリ」と検索してください。

#### ステップ3: APKをインストール

1. ダウンロードしたAPKファイルをタップ
2. 「**インストール**」をタップ
3. インストール完了後「**開く**」をタップ

---

# 初期設定

アプリを初めて起動したら、以下の設定を行ってください。

## 設定画面を開く

1. アプリを起動
2. 右上の「**⚙️ 設定**」ボタンをタップ

---

## キングオブタイムの設定

以下の3つを入力します：

| 項目           | 入力する内容                               |
| -------------- | ------------------------------------------ |
| **会社ID**     | `pe9lrc` （全員共通）                      |
| **ログインID** | キングオブタイムのログインID（各自異なる） |
| **パスワード** | キングオブタイムのパスワード（各自異なる） |

※ログインIDとパスワードは、普段キングオブタイムにログインする際に使用しているものです。

---

## Slackの設定

### 1. ユーザートークンの取得

Slackに自分のアカウントでメッセージを送信するために、「ユーザートークン」が必要です。以下の手順で取得してください。

#### ステップ1: Slack APIにアクセス

1. PCのブラウザで https://api.slack.com/apps にアクセス
2. 会社のSlackアカウントでログイン

#### ステップ2: アプリを作成

1. 「**Create New App**」ボタンをクリック
2. 「**From scratch**」を選択
3. 以下を入力：
   - **App Name**: `Quick Attendance`（好きな名前でOK）
   - **Pick a workspace**: `株式会社ルートチーム` を選択
4. 「**Create App**」をクリック

#### ステップ3: 権限を設定

1. 左メニューから「**OAuth & Permissions**」をクリック
2. 下にスクロールして「**Scopes**」セクションを探す
3. 「**User Token Scopes**」の「**Add an OAuth Scope**」をクリック
4. `chat:write` を検索して選択

#### ステップ4: ワークスペースにインストール

1. ページ上部の「**Install to Workspace**」をクリック
2. 権限の確認画面で「**許可する**」をクリック

#### ステップ5: トークンをコピー

1. 「**User OAuth Token**」が表示されます（`xoxp-` で始まる長い文字列）
2. 「**Copy**」ボタンをクリックしてコピー

### 2. アプリにトークンを設定

1. Quick Attendanceアプリの設定画面に戻る
2. 以下を入力：

| 項目                 | 入力する内容                                                          |
| -------------------- | --------------------------------------------------------------------- |
| **ユーザートークン** | コピーした `xoxp-...` を貼り付け                                      |
| **チャンネル名**     | メッセージを送信するチャンネル名（例: `general`）<br>※「#」は付けない |

### 3. メッセージのカスタマイズ（任意）

出勤・退勤時に送信するメッセージを自由に設定できます。

| 項目               | 例                                                     |
| ------------------ | ------------------------------------------------------ |
| **出勤メッセージ** | `おはようございます！`<br>`本日もよろしくお願いします` |
| **退勤メッセージ** | `お疲れ様でした！`<br>`お先に失礼します`               |

※改行も使えます

### 4. 設定を保存

1. すべての項目を入力したら「**保存**」ボタンをタップ
2. 「設定を保存しました」と表示されたらOK

---

# 使い方

## 出勤する

1. アプリを開く
2. 「**🌅 出勤**」ボタンをタップ
3. 自動的にキングオブタイムへの打刻とSlackへのメッセージ送信が行われます
4. 「成功」と表示されたら完了

## 退勤する

1. アプリを開く
2. 「**🌙 退勤**」ボタンをタップ
3. 自動的にキングオブタイムへの打刻とSlackへのメッセージ送信が行われます
4. 「成功」と表示されたら完了

---

# よくある質問・トラブルシューティング

## Q: 「ログインフォームが見つかりませんでした」と表示される

**原因**: キングオブタイムのログイン情報が間違っている可能性があります。

**対処法**:

1. 設定画面を開く
2. 会社ID、ログインID、パスワードを再確認
3. 保存して再度試す

## Q: Slackにメッセージが送信されない

**原因と対処法**:

- ユーザートークンが正しくコピーされているか確認（`xoxp-`で始まる）
- チャンネル名に「#」を付けていないか確認
- 指定したチャンネルに自分が参加しているか確認

## Q: 自分宛てにテスト送信したい

設定画面の「チャンネル名」に**自分のユーザーID**を入力すると、自分へのDMとして送信されます。

**ユーザーIDの確認方法**:

1. Slackで自分のプロフィールを開く
2. 「︙」（その他）をクリック
3. 「メンバーIDをコピー」を選択

## Q: アプリを更新したい（Expo Go版）

Expo Go版は自動的に最新版が反映されます。アプリを再起動するだけでOKです。

## Q: アプリを更新したい（APK版）

管理者から新しいAPKファイルを受け取り、再度インストールしてください。

---

# 注意事項

- キングオブタイムとSlackの認証情報は、各自のスマートフォン内にのみ保存されます
- 他の人に認証情報が見られることはありません
- 会社のSlackにアプリを追加する際、管理者の承認が必要な場合があります

---

# 開発者向け情報

## 技術スタック

- React Native / Expo
- TypeScript
- react-native-webview
- AsyncStorage
- Axios

## ローカル開発

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm start

# iOS シミュレーター
npm run ios

# Android エミュレーター
npm run android
```

## APKビルド

```bash
eas build --platform android --profile preview
```

## 更新の公開

```bash
eas update --branch preview --message "更新内容"
```
